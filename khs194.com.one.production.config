Listen 443

SSLProtocol             all -SSLv3 -TLSv1 -TLSv1.1
SSLCipherSuite          ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256
SSLHonorCipherOrder     on
# Docker 镜像暂不支持该选项
# SSLCompression          off
SSLSessionTickets       off

SSLUseStapling                    on
SSLStaplingResponderTimeout       5
SSLStaplingReturnResponderErrors  off
SSLStaplingCache                  shmcb:/var/run/ocsp(128000)

SSLSessionCache        "shmcb:/usr/local/apache2/logs/ssl_scache(512000)"
SSLSessionCacheTimeout  300

<VirtualHost _default_:80>
    ServerAdmin khs1994@khs1994.com

    DocumentRoot "/app/demo"
    ServerName 127.0.0.1

    ErrorLog "logs/error.log"
    CustomLog "logs/access.log" common

    <FilesMatch \.php$>
        SetHandler "proxy:fcgi://php7:9000"
    </FilesMatch>

    <Directory "/app/demo" >
      Options Indexes FollowSymLinks
      AllowOverride All
      Require all granted
    </Directory>
</VirtualHost>

<VirtualHost *:443>
    DocumentRoot "/app/demo"
    ServerName www.t.khs1994.com
    ServerAlias t.khs1994.com

    ErrorLog "logs/www.t.khs1994.com.error.log"
    CustomLog "logs/www.t.khs1994.com.access.log" common

    SSLEngine on
    SSLCertificateFile conf.d/ssl/www.t.khs1994.com.crt
    SSLCertificateKeyFile conf.d/ssl/www.t.khs1994.com.key

    # HSTS (mod_headers is required) (15768000 seconds = 6 months)
    Header always set Strict-Transport-Security "max-age=15768000"

    <FilesMatch \.php$>
        SetHandler "proxy:fcgi://php7:9000"
    </FilesMatch>

    <Directory "/app/demo" >
      Options Indexes FollowSymLinks
      AllowOverride All
      Require all granted
    </Directory>

</VirtualHost>

<VirtualHost *:443>
    DocumentRoot "/app/laravel/public"
    ServerName laravel.t.khs1994.com

    ErrorLog "logs/laravel.t.khs1994.com.error.log"
    CustomLog "logs/laravel.t.khs1994.com.access.log" common

    SSLEngine on
    SSLCertificateFile conf.d/ssl/www.t.khs1994.com.crt
    SSLCertificateKeyFile conf.d/ssl/www.t.khs1994.com.key

    # HSTS (mod_headers is required) (15768000 seconds = 6 months)
    Header always set Strict-Transport-Security "max-age=15768000"

    <FilesMatch \.php$>
        SetHandler "proxy:fcgi://php7:9000"
    </FilesMatch>

    <Directory "/app/laravel/public" >
      Options Indexes FollowSymLinks
      AllowOverride All
      Require all granted
    </Directory>

</VirtualHost>
